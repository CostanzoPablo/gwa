{% extends "administrar.html" %}

{% block head %}
	{{ parent() }}
	<link rel="stylesheet" href="css/categoria.css" />
	<script src="./js/nueva_categoria.js"></script>
{% endblock %}

{% block contenido %}
	{{ parent() }}

{% if categoria %}
<div class="formulario">
	<form method="post" action="./index.php?seccion=gestionar_categorias&amp;gestionar_categoria={{categoria.id}}&amp;actualizar_nombreYpadre=1" method="post">
		<table class="tablaFormulario accion" onclick="openClose('gestionarCategoria');">
		<tr>
		<td colspan="2">
			<h3>GESTIONAR CATEGORIA</h3>
		</td>
		</tr>
		</table>
		<table id="gestionarCategoria" class="tablaFormulario oculto">
		<tr>
			<td>
				NOMBRE DE LA CATEGORIA
			</td>
			<td>
				<input type="text" name="nombre" placeholder="Nombre de la categoria" value="{{categoria.nombre}}">
			</td>
		</tr>
		<tr>
			<td>
				CATEGORIA PADRE
			</td>
			<td>
				<select name="padre">
					<option value="">SIN PADRE</option>
					{% for padre in padresPrincipales %}
						{% if padre.id != categoria.id %}
							{% if padre.id == categoria.padre %}
								<option selected value="{{padre.id}}">
							{% else %}
								<option value="{{padre.id}}">
							{% endif %}
							{{ padre.camino }}
							{% if padre.camino %}
								->
							{% endif %}
						{% endif %}							
						{{padre.nombre}}
						</option>
					{% endfor %}
				</select>
			</td>
		</tr>
		<tr>
			<td align="center">
				<input type="submit" value="EDITAR CATEGORIA">
			</td>
			<td align="center">
				<a href="./index.php?seccion=gestionar_categorias&amp;gestionar_categoria={{categoria.id}}&amp;eliminarCategoria=true"><span class="glyphicon glyphicon-trash eliminar" aria-hidden="true"></span></a>
			</td>			
		</tr>
		</table>
	</form>
</div>

{% if categoria.padre >= 1 %}
<div class="formulario">
	<form method="post" action="./index.php?seccion=gestionar_categorias&amp;gestionar_categoria={{categoria.id}}&amp;agregarModulo=true" enctype="multipart/form-data">
	<table class="tablaFormulario accion" onclick="openClose('agregarModulo');">
	<tr>
		<td>
			<h3>AGREGAR MODULO</h3>
		</td>
	</tr>
	</table>
	<table id="agregarModulo" class="tablaFormulario oculto">	
	<tr>
		<td>
			TITULO
		</td>
		<td>
			<input type="text" name="titulo" value="">
		</td>
	</tr>
	<tr>
		<td>
			ORDEN DEL MODULO
		</td>
		<td>
			<input type="number" min="0" name="orden">
		</td>
	</tr>				
	<tr>
		<td valign="top">
			TEXTO (opcional)
		</td>
		<td>
			<textarea cols="40" rows="10" name="texto"></textarea>
		</td>
	</tr>
	<tr>
		<td>
			ALINEACION DEL TEXTO
		</td>
		<td>
			<select name="alineacion">
				<option value="left">Izquierda</option>
				<option value="center">Centrado</option>
				<option value="right">Derecha</option>
			</select>
		</td>
	</tr>	
	<tr>
		<td>
			ANCHO DEL TEXTO
		</td>
		<td>
			<input type="number" name="anchoTexto" value="" max="100" min="1">%
		</td>
	</tr>		
	<tr>
		<td>
			IMAGEN (opcional)
		</td>
		<td>
			<input type="file" name="imagen">
		</td>
	</tr>
	<tr>
		<td>
			ANCHO DE LA IMAGEN
		</td>
		<td>
			<input type="number" name="anchoImagen" value="" max="100" min="1">%
		</td>
	</tr>					
	<tr>
		<td>
			ALTO DE LA IMAGEN
		</td>
		<td>
			<input type="number" name="altoImagen" value="" max="100" min="1">%
		</td>
	</tr>						
	<tr>
		<td>
			VIDEO (opcional)
		</td>
		<td>
			<input type="text" name="video">
		</td>
	</tr>	
	<tr>
		<td>
			ANCHO DEL VIDEO
		</td>
		<td>
			<input type="number" name="anchoVideo" value="" max="100" min="1">%
		</td>
	</tr>	
	<tr>
		<td>
			ALTO DEL VIDEO
		</td>
		<td>
			<input type="number" name="altoVideo" value="" max="100" min="1">%
		</td>
	</tr>						
	<tr>
		<td colspan="2">
			<input type="submit" value="AGREGAR MODULO">
		</td>
	</tr>			
	</table>
	</form>
</div>
{% endif %}

{% if modulos %}
<div class="formulario">
	<table class="tablaFormulario accion" onclick="openClose('gestionarModulos');">
	<tr>
		<td>
			<h3>GESTIONAR MODULOS</h3>
		</td>
	</tr>
	</table>
{% endif %}

<div id="gestionarModulos" class="oculto">
{% for modulo in modulos %}
<hr>
		<form method="post" action="./index.php?seccion=gestionar_categorias&amp;gestionar_categoria={{categoria.id}}&amp;editarModulo={{modulo.id}}" enctype="multipart/form-data">
		<table  class="tablaFormulario">	
		<tr>
			<td>
				TITULO
			</td>
			<td>
				<input type="text" name="titulo" value="{{modulo.titulo}}">
			</td>
		</tr>
		<tr>
			<td>
				ORDEN DEL MODULO
			</td>
			<td>
				<input type="number" min="0" name="orden" value="{{modulo.orden}}">
			</td>
		</tr>				
		<tr>
			<td valign="top">
				TEXTO (opcional)
			</td>
			<td>
				<textarea cols="40" rows="10" name="texto">{{modulo.texto}}</textarea>
			</td>
		</tr>
		<tr>
			<td>
				ALINEACION DEL TEXTO
			</td>
			<td>
				<select name="alineacion">
					{% if modulo.alineacion == "left" %}
						<option selected value="left">Izquierda</option>
						<option value="center">Centrado</option>
						<option value="right">Derecha</option>
					{% endif %}
					{% if modulo.alineacion == "center" %}
						<option value="left">Izquierda</option>
						<option selected value="center">Centrado</option>
						<option value="right">Derecha</option>						
					{% endif %}
					{% if modulo.alineacion == "right" %}
						<option value="left">Izquierda</option>
						<option value="center">Centrado</option>
						<option selected value="right">Derecha</option>						
					{% endif %}									
				</select>
			</td>
		</tr>		
		<tr>
			<td>
				ANCHO DEL TEXTO
			</td>
			<td>
				<input type="number" name="anchoTexto" value="{{modulo.anchoTexto}}" max="100" min="1">%
			</td>
		</tr>		
		<tr>
			<td>
				IMAGEN (opcional)
			</td>
			<td>
				<input type="file" name="imagen">
			</td>
		</tr>
		<tr>
			<td colspan="2" style="height:300px">
				<div style="background-size: 100% auto; background-repeat: no-repeat; width: 100%; height:100%; background-image: url('{{modulo.imagen}}');	background-position: center;"></div>			
			</td>
		</tr>
		<tr>
			<td>
				ANCHO DE LA IMAGEN
			</td>
			<td>
				<input type="number" name="anchoImagen" value="{{modulo.anchoImagen}}" max="100" min="1">%
			</td>
		</tr>					
		<tr>
			<td>
				ALTO DE LA IMAGEN
			</td>
			<td>
				<input type="number" name="altoImagen" value="{{modulo.altoImagen}}" max="100" min="1">%
			</td>
		</tr>						
		<tr>
			<td>
				VIDEO (opcional)
			</td>
			<td>
				<input type="text" name="video" value="{{modulo.video}}">
			</td>
		</tr>	
		<tr>
			<td>
				ANCHO DEL VIDEO
			</td>
			<td>
				<input type="number" name="anchoVideo" value="{{modulo.anchoVideo}}" max="100" min="1">%
			</td>
		</tr>	
		<tr>
			<td>
				ALTO DEL VIDEO
			</td>
			<td>
				<input type="number" name="altoVideo" value="{{modulo.altoVideo}}" max="100" min="1">%
			</td>
		</tr>						
		<tr>
			<td colspan="2">
				<input type="submit" value="EDITAR MODULO">
			</td>
		</tr>			
		<tr>
			<td colspan="2" align="center">
				<a href="./index.php?seccion=gestionar_categorias&amp;gestionar_categoria={{categoria.id}}&amp;eliminarModulo={{modulo.id}}"><span class="glyphicon glyphicon-trash eliminar" aria-hidden="true"></span></a>
			</td>
		</tr>					
		</table>
		</form>
{% endfor %}
</div>
</div>
{% else %}
<form method="get" action="./index.php?seccion=gestionar_categorias" >
<input type="text" name="seccion" value="gestionar_categorias" class="oculto">
<select name="gestionar_categoria">
	{% for padre in padres %}
		<option value="{{padre.id}}">{{ padre.camino }}
		{% if padre.camino %}
			->
		{% endif %}
		{{padre.nombre}}
		</option>
	{% endfor %}	
</select>
<input type="submit" value="GESTIONAR">
</form>
{% endif %}



{% endblock %}	